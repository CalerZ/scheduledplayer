# 功能测试用例文档 - 噪音反击 (Noise Retaliation)

## 测试概览

**测试版本**：1.0.0  
**测试平台**：Android 8.0 - Android 14  
**主要目标设备**：华为 P30 (EMUI 10+)  

---

## 一、任务创建测试 (FR-1)

### TC-1.1 基本任务创建
| 项目 | 内容 |
|------|------|
| **前置条件** | 应用已安装，已授予必要权限 |
| **测试步骤** | 1. 点击主界面 FAB 按钮<br>2. 输入任务名称"测试任务1"<br>3. 设置开始时间 08:00<br>4. 设置结束时间 09:00<br>5. 选择播放模式"顺序播放"<br>6. 选择重复规则"每天"<br>7. 点击选择音频文件<br>8. 选择 1 个音频文件<br>9. 点击保存 |
| **预期结果** | 1. 任务创建成功<br>2. 返回主界面<br>3. 任务列表显示新创建的任务<br>4. 任务默认启用状态 |

### TC-1.2 多音频文件选择
| 项目 | 内容 |
|------|------|
| **前置条件** | 设备上有多个音频文件 |
| **测试步骤** | 1. 创建新任务<br>2. 点击选择音频文件<br>3. 选择 3 个音频文件<br>4. 确认选择 |
| **预期结果** | 1. 显示已选择 3 个文件<br>2. 文件列表显示所有选中文件<br>3. 可以删除单个文件 |

### TC-1.3 播放模式选择
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 创建新任务<br>2. 分别测试"顺序播放"和"随机播放"模式 |
| **预期结果** | 1. 单选按钮正确切换<br>2. 保存后模式正确保存 |

### TC-1.4 重复规则设置
| 项目 | 内容 |
|------|------|
| **测试步骤** | 测试以下重复规则：<br>1. 仅一次<br>2. 每天<br>3. 工作日（周一至周五）<br>4. 自定义（选择周二、周四、周六） |
| **预期结果** | 各种重复规则正确保存和显示 |

### TC-1.5 时间范围验证
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 设置开始时间 22:00<br>2. 设置结束时间 06:00（跨天）<br>3. 保存任务 |
| **预期结果** | 跨天时间范围正确保存和显示 |

### TC-1.6 必填项验证
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 不输入任务名称直接保存<br>2. 不选择音频文件直接保存 |
| **预期结果** | 显示相应的错误提示，阻止保存 |

---

## 二、任务管理测试 (FR-2)

### TC-2.1 任务列表显示
| 项目 | 内容 |
|------|------|
| **前置条件** | 已创建多个任务 |
| **测试步骤** | 1. 打开应用<br>2. 查看任务列表 |
| **预期结果** | 1. 显示所有任务<br>2. 每个任务显示名称、时间、状态<br>3. 启用的任务显示开关为开 |

### TC-2.2 任务启用/禁用
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 点击任务的启用开关<br>2. 再次点击开关 |
| **预期结果** | 1. 开关状态正确切换<br>2. 禁用时取消定时<br>3. 启用时重新设置定时 |

### TC-2.3 任务编辑
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 点击任务项进入编辑<br>2. 修改任务名称<br>3. 修改时间范围<br>4. 保存修改 |
| **预期结果** | 1. 正确加载现有数据<br>2. 修改后正确保存<br>3. 列表显示更新后的信息 |

### TC-2.4 任务删除
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 长按任务项<br>2. 确认删除 |
| **预期结果** | 1. 显示删除确认对话框<br>2. 确认后任务从列表消失<br>3. 相关定时被取消 |

### TC-2.5 空状态显示
| 项目 | 内容 |
|------|------|
| **前置条件** | 没有任何任务 |
| **测试步骤** | 打开应用 |
| **预期结果** | 显示空状态提示 |

---

## 三、定时播放测试 (FR-3)

### TC-3.1 定时开始播放
| 项目 | 内容 |
|------|------|
| **前置条件** | 创建一个 2 分钟后开始的任务 |
| **测试步骤** | 1. 等待到达开始时间<br>2. 观察播放行为 |
| **预期结果** | 1. 准时开始播放<br>2. 显示前台通知<br>3. 播放第一个音频文件 |

### TC-3.2 定时结束播放
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务正在播放中 |
| **测试步骤** | 等待到达结束时间 |
| **预期结果** | 1. 准时停止播放<br>2. 前台通知消失 |

### TC-3.3 顺序播放模式
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务包含 3 个音频文件，设置为顺序播放 |
| **测试步骤** | 开始播放，等待多个文件播放 |
| **预期结果** | 按文件顺序依次播放 |

### TC-3.4 随机播放模式
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务包含 5 个音频文件，设置为随机播放 |
| **测试步骤** | 开始播放，记录播放顺序，重复测试 |
| **预期结果** | 播放顺序随机，多次测试顺序不同 |

### TC-3.5 循环播放
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务包含 2 个短音频文件 |
| **测试步骤** | 等待所有文件播放完一轮 |
| **预期结果** | 自动从头开始循环播放 |

### TC-3.6 多任务同时播放（混音）
| 项目 | 内容 |
|------|------|
| **前置条件** | 创建 2 个时间重叠的任务 |
| **测试步骤** | 等待两个任务都开始 |
| **预期结果** | 1. 两个任务同时播放<br>2. 音频混合输出<br>3. 各任务独立控制 |

### TC-3.7 重复任务触发
| 项目 | 内容 |
|------|------|
| **前置条件** | 创建每天重复的任务 |
| **测试步骤** | 1. 等待任务执行完成<br>2. 第二天同一时间观察 |
| **预期结果** | 每天准时触发 |

### TC-3.8 定时精度测试
| 项目 | 内容 |
|------|------|
| **测试步骤** | 记录 10 次定时触发的实际时间 |
| **预期结果** | 误差在 ±1 分钟内 |

---

## 四、后台播放测试 (FR-4)

### TC-4.1 锁屏播放
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务正在播放 |
| **测试步骤** | 按电源键锁屏 |
| **预期结果** | 播放继续，不中断 |

### TC-4.2 切换应用播放
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务正在播放 |
| **测试步骤** | 切换到其他应用 |
| **预期结果** | 播放继续，不中断 |

### TC-4.3 前台通知显示
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务正在播放 |
| **测试步骤** | 下拉通知栏 |
| **预期结果** | 1. 显示播放通知<br>2. 显示当前任务名称<br>3. 显示停止按钮 |

### TC-4.4 通知停止操作
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务正在播放，通知栏可见 |
| **测试步骤** | 点击通知中的停止按钮 |
| **预期结果** | 播放停止，通知消失 |

### TC-4.5 长时间后台播放
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 开始播放<br>2. 锁屏<br>3. 等待 30 分钟 |
| **预期结果** | 播放持续进行，无中断 |

---

## 五、异常处理测试 (FR-5)

### TC-5.1 音频文件缺失
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务关联的音频文件已被删除 |
| **测试步骤** | 触发任务播放 |
| **预期结果** | 1. 跳过缺失文件<br>2. 播放其他有效文件<br>3. 显示提示信息 |

### TC-5.2 所有文件缺失
| 项目 | 内容 |
|------|------|
| **前置条件** | 任务所有音频文件都已删除 |
| **测试步骤** | 触发任务播放 |
| **预期结果** | 显示错误提示，任务不执行 |

### TC-5.3 存储权限被撤销
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 在系统设置中撤销存储权限<br>2. 触发任务播放 |
| **预期结果** | 显示权限请求或错误提示 |

---

## 六、系统集成测试

### TC-6.1 开机自启动
| 项目 | 内容 |
|------|------|
| **前置条件** | 有启用的定时任务 |
| **测试步骤** | 重启设备 |
| **预期结果** | 1. 应用自动启动<br>2. 定时任务重新调度<br>3. 到时间正常触发 |

### TC-6.2 应用崩溃恢复
| 项目 | 内容 |
|------|------|
| **前置条件** | 有启用的定时任务 |
| **测试步骤** | 强制停止应用 |
| **预期结果** | 下次触发时间到达时正常执行（通过 WorkManager 备份） |

### TC-6.3 时区变更
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 创建定时任务<br>2. 更改系统时区 |
| **预期结果** | 任务时间保持本地时间不变 |

---

## 七、华为设备专项测试

### TC-7.1 华为自启动权限
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 首次启动应用<br>2. 查看权限引导 |
| **预期结果** | 1. 显示自启动权限引导<br>2. 点击后跳转到华为手机管家<br>3. 引导文案清晰 |

### TC-7.2 华为电池优化
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 查看电池优化引导<br>2. 按引导操作 |
| **预期结果** | 1. 正确检测电池优化状态<br>2. 引导跳转正确 |

### TC-7.3 华为后台应用管控
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 查看后台管控引导<br>2. 按引导设置为"手动管理" |
| **预期结果** | 应用不被自动清理 |

### TC-7.4 华为省电模式
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 开启省电模式<br>2. 测试定时任务 |
| **预期结果** | 定时任务正常触发（可能有延迟） |

### TC-7.5 华为清理后台
| 项目 | 内容 |
|------|------|
| **前置条件** | 已设置自启动和后台管控权限 |
| **测试步骤** | 1. 在最近任务中清除应用<br>2. 等待定时任务触发 |
| **预期结果** | 定时任务正常触发 |

### TC-7.6 华为长时间稳定性
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 设置多个任务<br>2. 运行 24 小时 |
| **预期结果** | 1. 所有任务正常执行<br>2. 无内存泄漏<br>3. 电池消耗合理 |

---

## 八、性能测试

### TC-8.1 启动时间
| 项目 | 内容 |
|------|------|
| **测试步骤** | 冷启动应用，计时 |
| **预期结果** | 启动时间 < 3 秒 |

### TC-8.2 内存占用
| 项目 | 内容 |
|------|------|
| **测试步骤** | 1. 使用 Android Profiler 监控<br>2. 正常使用 30 分钟 |
| **预期结果** | 内存占用稳定，无明显增长 |

### TC-8.3 大量任务
| 项目 | 内容 |
|------|------|
| **测试步骤** | 创建 20 个任务 |
| **预期结果** | 1. 列表滚动流畅<br>2. 操作响应正常 |

---

## 测试结果记录模板

| 测试用例 | 测试日期 | 测试设备 | 结果 | 备注 |
|----------|----------|----------|------|------|
| TC-1.1 | | | ☐通过 ☐失败 | |
| TC-1.2 | | | ☐通过 ☐失败 | |
| ... | | | | |

---

## Bug 记录模板

| Bug ID | 标题 | 严重程度 | 复现步骤 | 状态 |
|--------|------|----------|----------|------|
| BUG-001 | | 高/中/低 | | 待修复/已修复 |
